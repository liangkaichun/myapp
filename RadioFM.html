<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio FM</title>
	<link rel="icon" type="image/svg+xml" href="data:image/svg+xml;utf8,<svg width='158' height='158' xmlns='http://www.w3.org/2000/svg'>
	 <g>
	   <rect fill='%23D4AF37' stroke='%23000' x='4.5' y='51.25' width='149' height='94' rx='20' stroke-width='5'/>
	   <ellipse fill='%23fff' stroke='%23000' stroke-width='5' cx='125.5' cy='80.25' rx='10' ry='10'/>
	   <ellipse fill='%23fff' stroke='%23000' stroke-width='5' cx='125.5' cy='115.25' rx='10' ry='10'/>
	   <line fill='none' stroke-width='2' x1='124.5' y1='80.25' x2='133.5' y2='71.25' stroke='%23000'/>
	   <line fill='none' x1='119.5' y1='107.25' x2='126.5' y2='114.25' stroke-width='2' stroke='%23000'/>
	   <line fill='none' stroke-width='5' x1='20.5' y1='51.25' x2='92.5' y2='24.25' stroke='%23000'/>
	   <ellipse fill='none' stroke='%23000' stroke-width='5' cx='95' cy='22.75' rx='5' ry='4.5'/>
	   <ellipse fill='none' stroke='%23000' cx='95' cy='22.75' rx='10' ry='10'/>
	   <line fill='none' stroke-width='5' x1='24.5' y1='99.25' x2='96.50735' y2='99.25' stroke='%23ffffff'/>
	   <line fill='none' stroke='%23ffffff' stroke-width='5' x1='36.99835' y1='112.25' x2='84.00899' y2='112.25'/>
	   <line fill='none' stroke='%23ffffff' stroke-width='5' x1='36.99835' y1='86.25' x2='84.00899' y2='86.25'/>
	   <line fill='none' stroke='%23ffffff' stroke-width='5' x1='47.99368' y1='125.25' x2='73.01367' y2='125.25'/>
	   <line fill='none' stroke='%23ffffff' stroke-width='5' x1='47.99368' y1='72.25' x2='73.01367' y2='72.25'/>
	 </g>
	</svg>">
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .scrollbar-thin {
                scrollbar-width: thin;
            }
            .scrollbar-thumb-rounded {
                scrollbar-color: rgba(112, 120, 136, 0.5) rgba(160, 168, 184, 0.5);
            }
        }
    </style>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', 'Microsoft YaHei', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        html,
        body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            background: #e8f2ff;
            background-image: linear-gradient(to bottom, #e8f2ff, #d0d8e8);
        }

        body {
            -webkit-tap-highlight-color: transparent;
            outline: none;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
        }

        p {
            display: none;
        }

        .radio-container {
            width: 100%;
            height: 100%;
            background: #c0c8d8;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.3), inset 0 -5px 5px rgba(0, 0, 0, 0.1);
            border: 1px solid #a0a8b8;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            padding: 10px;
        }

        .radio-title {
            color: #404860;
            font-weight: bold;
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3);
            font-size: 18px;
        }

        .display {
            background: #a0a8b8;
            border: 5px solid #707888;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 8px;
            box-shadow: inset 0 8px 15px rgba(0, 0, 0, 0.2), inset 0 -5px 5px rgba(255, 255, 255, 0.1);
            position: relative;
            min-height: 90px;
            height: 100px;
        }

        .station-name {
            font-size: 22px;
            font-weight: bold;
            color: #303850;
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.3);
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            cursor: pointer;
        }

        .status {
            font-size: 16px;
            color: #404860;
            font-style: italic;
        }

        .tuner {
            background: #9098a8;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 10px;
            box-shadow: inset 0 8px 15px rgba(0, 0, 0, 0.2), inset 0 -5px 5px rgba(255, 255, 255, 0.1);
        }

        .tuner-scale {
            height: 30px;
            background: #707888;
            border-radius: 5px;
            position: relative;
            margin-bottom: 10px;
        }

        .tuner-indicator {
            position: absolute;
            top: -6px;
            left: 50%;
            width: 4px;
            height: 42px;
            background: #f0f0f0;
            transform: translateX(-50%);
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
            z-index: 2;
        }

        .controls {
            display: flex;
            justify-content: center;
            margin-bottom: 8px;
            align-items: center;
            gap: 8px;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #b0b8c8;
            border: none;
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2), inset 0 3px 3px rgba(255, 255, 255, 0.2), inset 0 -3px 3px rgba(0, 0, 0, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: transform 0.1s;
        }

        .control-btn:active {
            transform: translateY(2px);
            box-shadow: inset 0 8px 15px rgba(0, 0, 0, 0.2), inset 0 -3px 3px rgba(255, 255, 255, 0.1);
        }

        .control-btn svg {
            width: 30px;
            height: 30px;
            fill: #404860;
            filter: drop-shadow(0 1px 0 rgba(255, 255, 255, 0.3));
        }

        .btn-play {
            width: 50px;
            height: 50px;
            background: #4FAAFF;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3), inset 0 3px 3px rgba(255, 255, 255, 0.3), inset 0 -3px 3px rgba(0, 0, 0, 0.3);
        }

        .btn-play svg {
            width: 30px;
            height: 30px;
            fill: #fff;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
        }

        .btn-play:active {
            transform: translateY(1px);
            box-shadow: inset 0 8px 20px rgba(0, 0, 0, 0.3), inset 0 -3px 3px rgba(255, 255, 255, 0.1);
        }

        .station-list-container {
            flex: 1;
            background: #b0b8c8;
            border-radius: 10px;
            padding: 10px;
            overflow-y: auto;
            box-shadow: inset 0 8px 15px rgba(0, 0, 0, 0.2), inset 0 -5px 5px rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
        }

        .station-list-wrapper {
            flex: 1;
            overflow-y: auto;
        }

        .station-item {
            padding: 10px 12px;
            margin-bottom: 6px;
            background: #c0c8d8;
            border-radius: 8px;
            cursor: pointer;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid #a0a8b8;
            transition: all 0.2s;
            position: relative;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .station-item:active {
            background: #4FAAFF;
            transform: translateY(2px);
        }

        .station-item.active {
            background: #4FAAFF;
            color: #fff;
            border-color: #80a0d0;
        }

        .station-item-name {
            font-weight: bold;
            color: #404860;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 16px;
            flex: 1;
        }

        .station-item.active .station-item-name {
            color: #fff;
            text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
        }

        .station-item-playing {
            display: none !important;
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: #f00;
            border-radius: 50%;
            box-shadow: 0 0 8px rgba(255, 0, 0, 0.5);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% {
                opacity: 0.6;
            }

            50% {
                opacity: 1;
            }

            100% {
                opacity: 0.6;
            }
        }

        .panel-btn {
            padding: 2px;
            background: #b0b8c8;
            border: none;
            border-radius: 5px;
            color: #404860;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            text-align: center;
            box-shadow: 0 2px 3px rgba(0, 0, 0, 0.2), inset 0 1px 1px rgba(255, 255, 255, 0.2);
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            width: calc(15% - 10px);
            min-width: 0;
            height: 36px;
        }

        .panel-btn svg {
            width: 12px;
            height: 12px;
            margin-right: 3px;
            fill: currentColor;
        }

        .panel-btn:active {
            transform: translateY(1px);
            box-shadow: inset 0 2px 3px rgba(0, 0, 0, 0.2);
        }

        .panel-btn.active {
            background: #4FAAFF;
            color: #fff;
        }

        /* 搜索框样式修改 */
        .search-container {
            position: relative;
            margin-bottom: 10px;
        }

        .search-box {
            padding: 8px 30px 8px 8px; /* 右侧留出空间给清除图标 */
            background: #b0b8c8;
            border: 1px solid #a0a8b8;
            border-radius: 5px;
            color: #404860;
            font-size: 14px;
            width: 100%;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .clear-search {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            cursor: pointer;
            display: none;
            font-size: 20px;
            color: #707888;
        }

        .timer-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }

        .timer-box {
            background: #c0c8d8;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            width: 300px;
            max-width: 90%;
        }

        .timer-title {
            font-size: 18px;
            font-weight: bold;
            color: #404860;
            margin-bottom: 15px;
            text-align: center;
        }

        .timer-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin-bottom: 15px;
        }

        .timer-option {
            margin-bottom: 8px;
            justify-content: center;
        }

        .timer-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #a0a8b8;
            border-radius: 5px;
            background: #b0b8c8;
            color: #404860;
        }

        .timer-buttons {
            display: flex;
            justify-content: space-between;
        }

        .timer-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 90px;
        }

        .timer-set {
            background: #4FAAFF;
            color: #fff;
        }

        .timer-cancel {
            background: #b0b8c8;
            color: #404860;
        }

        .favorite-btn {
            background: none;
            border: none;
            color: #a0a8b8;
            font-size: 16px;
            cursor: pointer;
            margin-left: 8px;
            padding: 0 5px;
            font-style: normal;
        }

        .station-item.active .favorite-btn {
            color: #fff;
        }

        .favorite-btn.favorited {
            color: gold;
        }

        /* 滚动条样式 */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: #a0a8b8;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb {
            background: #707888;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #606878;
        }
    </style>
    <!-- 引入 hls.js 库 -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</head>

<body>
    <div class="radio-container">
        <div class="display">
            <div class="station-name" id="current-station"></div>
            <div class="status" id="status"></div>
        </div>

        <div class="controls">
            <button class="panel-btn active" id="btn-show-all">
                <svg viewBox="0 0 24 24">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path>
                </svg>
                <span>全部</span>
            </button>
            <button class="panel-btn" id="btn-show-favorites">
                <svg viewBox="0 0 24 24">
                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path>
                </svg>
                <span>收藏</span>
            </button>
            <button class="control-btn" id="btn-prev">
                <svg viewBox="0 0 24 24">
                    <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path>
                </svg>
            </button>
            <button class="control-btn btn-play" id="btn-play">
                <svg viewBox="0 0 24 24" id="play-icon">
                    <path d="M8 5v14l11-7z"></path>
                </svg>
            </button>
            <button class="control-btn" id="btn-next">
                <svg viewBox="0 0 24 24">
                    <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path>
                </svg>
            </button>
            <button class="panel-btn" id="btn-timer">
                <svg viewBox="0 0 24 24">
                    <path d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
                </svg>
                <span>定时</span>
            </button>
            <button class="panel-btn" id="btn-open-m3u">
                <svg viewBox="0 0 24 24">
                    <path d="M20 6H12L10 4H4C2.9 4 2 4.9 2 6V18C2 19.1 2.9 20 4 20H20C21.1 20 22 19.1 22 18V8C22 6.9 21.1 6 20 6Z"></path>
                </svg>
                <span>打开</span>
            </button>
        </div>

        <div class="station-list-container">
            <!-- 使用新的搜索容器 -->
            <div class="search-container">
                <input type="text" class="search-box" id="search-box" placeholder="搜索...">
                <span class="clear-search" id="clear-search">&times;</span>
            </div>
            <div class="station-list-wrapper" id="station-list">

            </div>
        </div>
    </div>

    <audio id="audio-player" preload="none"></audio>

    <!-- 定时器弹出框 -->
    <div class="timer-container" id="timer-container">
        <div class="timer-box">
            <div class="timer-title">定时关闭</div>
            <div class="timer-options">
                <div class="timer-option">
                    <button class="timer-btn timer-option-btn" data-minutes="30">30分钟</button>
                </div>
                <div class="timer-option">
                    <button class="timer-btn timer-option-btn" data-minutes="60">60分钟</button>
                </div>
                <div class="timer-option">
                    <button class="timer-btn timer-option-btn" data-minutes="90">90分钟</button>
                </div>
                <div class="timer-option">
                    <button class="timer-btn timer-option-btn" data-minutes="120">120分钟</button>
                </div>
            </div>
            <div style="margin-bottom: 15px;">
                <input type="number" class="timer-input" id="custom-time" placeholder="自定义" min="1">
            </div>
            <div class="timer-buttons">
                <button class="timer-btn timer-cancel" id="timer-cancel">取消</button>
                <button class="timer-btn timer-set" id="timer-set">设置</button>
            </div>
        </div>
    </div>

    <!-- M3u文件选择弹出框 -->
    <div class="timer-container" id="m3u-select-container">
        <div class="timer-box">
            <div class="timer-title">选择m3u或csv文件</div>
            <input type="file" id="m3u-file-input" accept=".m3u,.csv">
            <div style="margin-top: 10px;">
                <input type="checkbox" id="default-load-checkbox">
                <label for="default-load-checkbox" style="font-size:14px">启动时加载</label>
            </div>
            <div class="timer-buttons" style="margin-top: 10px;">
                <button class="timer-btn timer-cancel" id="m3u-cancel">取消</button>
                <button class="timer-btn timer-set" id="m3u-confirm">确认</button>
            </div>
            <div class="timer-title" style="margin-top:10px">添加网络电台</div>
			<div style="margin-top: 10px;">
				<span style="font-size:14px">名称：</span>
				<input type="text" id="m3u-name-input" style="width:200px" maxlength="40">
			</div>
			<div style="margin-top: 10px;">
				<span style="font-size:14px">链接：</span>
            	<input type="text" id="m3u-url-input" style="width:200px" maxlength="200">
			</div>
            <div class="timer-buttons" style="margin-top: 10px;">
                <button class="timer-btn timer-cancel" id="url-cancel">取消</button>
                <button class="timer-btn timer-set" id="url-confirm">确认</button>
            </div>
        </div>
    </div>

    <script>
        // 内置电台数据
        let radioData = ["央广中国之声,http://iovliveplay.radio.cn/fm/1600000000510h.m3u8",
"央广经济之声,http://iovliveplay.radio.cn/fm/1600000000514h.m3u8",
"央广音乐之声,http://iovliveplay.radio.cn/fm/1600000000512h.m3u8",
"央广经典音乐广播,http://iovliveplay.radio.cn/fm/1600000000716h.m3u8",
"央广台海之声,http://iovliveplay.radio.cn/fm/1600000002278h.m3u8",
"央广神州之声,http://iovliveplay.radio.cn/fm/1600000000326h.m3u8",
"大湾区之声,http://iovliveplay.radio.cn/fm/1600000000484h.m3u8",
"央广民族之声,http://iovliveplay.radio.cn/fm/1600000000515h.m3u8",
"央广文艺之声,http://iovliveplay.radio.cn/fm/1600000000327h.m3u8",
"央广阅读之声,http://iovliveplay.radio.cn/fm/1600000000606h.m3u8",
"央广香港之声,http://iovliveplay.radio.cn/fm/1600000000328h.m3u8",
"央广中国交通广播,http://iovliveplay.radio.cn/fm/1600000000323h.m3u8",
"央广乡村广播,http://iovliveplay.radio.cn/fm/1600000002551h.m3u8",
"环球资讯,https://sk.cri.cn/905.m3u8",
"南海之声,https://sk.cri.cn/nhzs.m3u8",
"轻松调频,https://sk.cri.cn/915.m3u8",
"Hit FM,https://sk.cri.cn/887.m3u8",
"CGTN,https://sk.cri.cn/am846.m3u8",
"世界华声华语环球方言广播,https://sk.cri.cn/hxfh.m3u8",
"华语环球广播,https://sk.cri.cn/hyhq.m3u8",
"CCTV1综合,https://piccpndali.v.myalicdn.com/audio/cctv1_2.m3u8",
"CCTV2财经,https://piccpndali.v.myalicdn.com/audio/cctv2_2.m3u8",
"CCTV3综艺,https://piccpndali.v.myalicdn.com/audio/cctv3_2.m3u8",
"CCTV4国际,https://piccpndali.v.myalicdn.com/audio/cctv4_2.m3u8",
"CCTV4国际美洲,https://piccpndali.v.myalicdn.com/audio/cctvamerica_2.m3u8",
"CCTV4国际欧洲,https://piccpndali.v.myalicdn.com/audio/cctveurope_2.m3u8",
"CCTV5+体育,https://piccpndali.v.myalicdn.com/audio/cctv5plus_2.m3u8",
"CCTV5体育,https://piccpndali.v.myalicdn.com/audio/cctv5_2.m3u8",
"CCTV6电影,https://piccpndali.v.myalicdn.com/audio/cctv6_2.m3u8",
"CCTV7国防军事,https://piccpndali.v.myalicdn.com/audio/cctv7_2.m3u8",
"CCTV8电视剧,https://piccpndali.v.myalicdn.com/audio/cctv8_2.m3u8",
"CCTV9纪录,https://piccpndali.v.myalicdn.com/audio/cctv9_2.m3u8",
"CCTV10科教,https://piccpndali.v.myalicdn.com/audio/cctv10_2.m3u8",
"CCTV11戏曲,https://piccpndali.v.myalicdn.com/audio/cctv11_2.m3u8",
"CCTV12社会与法,https://piccpndali.v.myalicdn.com/audio/cctv12_2.m3u8",
"CCTV13新闻,https://piccpndali.v.myalicdn.com/audio/cctv13_2.m3u8",
"CCTV14少儿,https://piccpndali.v.myalicdn.com/audio/cctv14_2.m3u8",
"CCTV15音乐,https://piccpndali.v.myalicdn.com/audio/cctv15_2.m3u8",
"CCTV16奥林匹克,https://piccpndali.v.myalicdn.com/audio/cctv16_2.m3u8",
"CCTV17农业农村,https://piccpndali.v.myalicdn.com/audio/cctv17_2.m3u8",
"CETV1,https://piccpndali.v.myalicdn.com/audio/cetv1_2.m3u8",
"CETV2,https://piccpndali.v.myalicdn.com/audio/cetv2_2.m3u8",
"CETV3,https://piccpndali.v.myalicdn.com/audio/cetv3_2.m3u8",
"CETV4,https://piccpndali.v.myalicdn.com/audio/cetv4_2.m3u8",
"安徽卫视,https://piccpndali.v.myalicdn.com/audio/anhui_2.m3u8",
"北京卫视,https://piccpndali.v.myalicdn.com/audio/btv1_2.m3u8",
"重庆卫视,https://piccpndali.v.myalicdn.com/audio/chongqing_2.m3u8",
"第一财经,https://a1live.livecdn.yicai.com/live/radio_tv.m3u8",
"东方卫视,https://piccpndali.v.myalicdn.com/audio/dongfang_2.m3u8",
"东南卫视,https://piccpndali.v.myalicdn.com/audio/dongnan_2.m3u8",
"凤凰中文,https://playtv-live.ifeng.com/live/06OLEGEGM4G_audio.m3u8",
"凤凰资讯,https://playtv-live.ifeng.com/live/06OLEEWQKN4_audio.m3u8",
"甘肃卫视,https://piccpndali.v.myalicdn.com/audio/gansu_2.m3u8",
"广东卫视,https://piccpndali.v.myalicdn.com/audio/guangdong_2.m3u8",
"广西卫视,https://piccpndali.v.myalicdn.com/audio/guangxi_2.m3u8",
"贵州卫视,https://piccpndali.v.myalicdn.com/audio/guizhou_2.m3u8",
"海南卫视,https://piccpndali.v.myalicdn.com/audio/travel_2.m3u8",
"河北卫视,https://satellitepull.cnr.cn/live/wxhebws/playlist.m3u8",
"河南卫视,https://piccpndali.v.myalicdn.com/audio/henan_2.m3u8",
"黑龙江卫视,https://piccpndali.v.myalicdn.com/audio/heilongjiang_2.m3u8",
"湖北卫视,https://piccpndali.v.myalicdn.com/audio/hubei_2.m3u8",
"湖南卫视,https://satellitepull.cnr.cn/live/wx32hunws/playlist.m3u8",
"吉林卫视,https://satellitepull.cnr.cn/live/wxjlws/playlist.m3u8",
"江苏卫视,https://satellitepull.cnr.cn/live/wx32jsws/playlist.m3u8",
"江西卫视,https://piccpndali.v.myalicdn.com/audio/jiangxi_2.m3u8",
"辽宁卫视,https://piccpndali.v.myalicdn.com/audio/liaoning_2.m3u8",
"内蒙古卫视,https://piccpndali.v.myalicdn.com/audio/neimenggu_2.m3u8",
"宁夏卫视,https://piccpndali.v.myalicdn.com/audio/ningxia_2.m3u8",
"青海卫视,https://piccpndali.v.myalicdn.com/audio/qinghai_2.m3u8",
"山东卫视,https://piccpndali.v.myalicdn.com/audio/shandong_2.m3u8",
"山西卫视,https://piccpndali.v.myalicdn.com/audio/shan1xi_2.m3u8",
"陕西卫视,https://piccpndali.v.myalicdn.com/audio/shan3xi_2.m3u8",
"深圳卫视,https://satellitepull.cnr.cn/live/wxszws/playlist.m3u8",
"四川卫视,https://piccpndali.v.myalicdn.com/audio/sichuan_2.m3u8",
"天津卫视,https://piccpndali.v.myalicdn.com/audio/tianjin_2.m3u8",
"西藏卫视,https://piccpndali.v.myalicdn.com/audio/xizang_2.m3u8",
"新疆卫视,https://piccpndali.v.myalicdn.com/audio/xinjiang_2.m3u8",
"香港卫视,https://piccpndks.v.kcdnvip.com/audio/xianggangweishi_2.m3u8",
"延边卫视,https://satellitepull.cnr.cn/live/wxybws/playlist.m3u8",
"云南卫视,https://piccpndali.v.myalicdn.com/audio/yunnan_2.m3u8",
"浙江卫视,https://satellitepull.cnr.cn/live/wxzjws/playlist.m3u8",
"BTV财经,https://wstvcpudali.v.myalicdn.com/wstvcpud/udrmbtv5_1/index.m3u8?adapt=0&BR=audio",
"BTV科教,https://wstvcpudali.v.myalicdn.com/wstvcpud/udrmbtv3_1/index.m3u8?adapt=0&BR=audio",
"BTV生活,https://wstvcpudali.v.myalicdn.com/wstvcpud/udrmbtv7_1/index.m3u8?adapt=0&BR=audio",
"BTV文艺,https://wstvcpudali.v.myalicdn.com/wstvcpud/udrmbtv2_1/index.m3u8?adapt=0&BR=audio",
"BTV新闻,https://wstvcpudali.v.myalicdn.com/wstvcpud/udrmbtv9_1/index.m3u8?adapt=0&BR=audio",
"BTV影视,https://wstvcpudali.v.myalicdn.com/wstvcpud/udrmbtv4_1/index.m3u8?adapt=0&BR=audio",
"浙江国际伴音,https://ali-vl.cztv.com/channels/lantian/channel010/360p.m3u8",
"浙江经济伴音,https://ali-vl.cztv.com/channels/lantian/channel003/360p.m3u8",
"浙江民生伴音,https://ali-vl.cztv.com/channels/lantian/channel006/360p.m3u8",
"浙江卫视伴音,https://ali-vl.cztv.com/channels/lantian/channel001/360p.m3u8",
"浙江新闻伴音,https://ali-vl.cztv.com/channels/lantian/channel007/360p.m3u8",
"浙江影视伴音,https://ali-vl.cztv.com/channels/lantian/channel004/360p.m3u8",
"钱江都市伴音,https://ali-vl.cztv.com/channels/lantian/channel002/360p.m3u8",
"之江纪录伴音,https://ali-vl.cztv.com/channels/lantian/channel012/360p.m3u8",
"厦门卫视伴音,https://xiamenalic.v.myalicdn.com/xiamen/xiamen_1/index.m3u8",
"北京音乐广播,http://iovliveplay.radio.cn/fm/1600000000481h.m3u8",
"深圳电台飞扬971,http://iovliveplay.radio.cn/fm/1600000002407h.m3u8",
"楚天音乐广播,http://iovliveplay.radio.cn/fm/1600000002378h.m3u8",
"湖北经典音乐广播,http://iovliveplay.radio.cn/fm/1600000000304h.m3u8",
"安徽音乐广播,http://iovliveplay.radio.cn/fm/1600000000300h.m3u8",
"南京音乐广播,http://lhttp.qingting.fm/live/4963/64k.mp3",
"浙江音乐调频,http://lhttp.qingting.fm/live/4866/64k.mp3",
"上海动感101,http://lhttp.qingting.fm/live/274/64k.mp3",
"上海流行音乐LoveRadio,http://lhttp.qingting.fm/live/273/64k.mp3",
"广东音乐之声,http://lhttp.qingting.fm/live/1260/64k.mp3",
"江苏音乐广播,http://iovliveplay.radio.cn/fm/1600000000172h.m3u8",
"河北音乐广播,http://iovliveplay.radio.cn/fm/1600000000360h.m3u8",
"重庆音乐广播,http://iovliveplay.radio.cn/fm/1600000000407h.m3u8",
"厦门音乐广播,http://iovliveplay.radio.cn/fm/1600000003153h.m3u8",
"怀集音乐之声,http://iovliveplay.radio.cn/fm/1600000002241h.m3u8",
"爵士FM,http://iovliveplay.radio.cn/fm/1600000002465h.m3u8",
"Jia 883 Radio,http://playerservices.streamtheworld.com/api/livestream-redirect/883JIAAAC.aac",
"RIA 897,https://22393.live.streamtheworld.com/RIA897FM_SC",
"YES 933,https://22393.live.streamtheworld.com/YES933_PREM.aac",
"CNA 938,https://22893.live.streamtheworld.com/938NOW_SC",
"飞扬调频,http://stream.rcs.revma.com/e0tdah74hv8uv",
"飞碟电台,http://stream.rcs.revma.com/em90w4aeewzuv",
"中广新闻网,http://stream.rcs.revma.com/fgtx07f3qtzuv",
"中广音乐网,http://stream.rcs.revma.com/ks4vsmg3qtzuv",
"中广流行网,http://stream.rcs.revma.com/aw9uqyxy2tzuv",
"中广 I go,https://stream.rcs.revma.com/s7hc9kpy2tzuv",
"IC之音,https://n10.rcs.revma.com/7mnq8rt7k5zuv",
"台北HitFM,http://202.39.43.67:1935/live/RA000036/playlist.m3u8",
"BravoFM91.3,https://onair.bravo913.com.tw:9130/live.mp3",
"澳门绿村电台,https://fm995.ddns.net/hls1/fm995.m3u8",
"AsiaFM 亚洲音乐台,http://asiafm.hk:8000/asiafm",
"AsiaFM HD音乐台,http://asiafm.hk:8000/asiahd",
"AsiaFM 亚洲音乐,http://asiafm.vip:8000/fm965"
        ].join('\\');

        document.addEventListener('DOMContentLoaded', function () {
            // 获取DOM元素
            const audioPlayer = document.getElementById('audio-player');
            const btnPlay = document.getElementById('btn-play');
            const playIcon = document.getElementById('play-icon');
            const btnPrev = document.getElementById('btn-prev');
            const btnNext = document.getElementById('btn-next');
            const btnTimer = document.getElementById('btn-timer');
            const btnAbout = document.getElementById('btn-about');
            const currentStationDisplay = document.getElementById('current-station');
            const statusDisplay = document.getElementById('status');
            const stationList = document.getElementById('station-list');
            const searchBox = document.getElementById('search-box');
            const clearSearch = document.getElementById('clear-search');
            const btnShowFavorites = document.getElementById('btn-show-favorites');
            const btnShowAll = document.getElementById('btn-show-all');
            const timerContainer = document.getElementById('timer-container');
            const timerOptionBtns = document.querySelectorAll('.timer-option-btn');
            const customTimeInput = document.getElementById('custom-time');
            const timerSetBtn = document.getElementById('timer-set');
            const timerCancelBtn = document.getElementById('timer-cancel');
            const btnOpenM3u = document.getElementById('btn-open-m3u');
            const m3uSelectContainer = document.getElementById('m3u-select-container');
            const m3uFileInput = document.getElementById('m3u-file-input');
            const m3uCancelBtn = document.getElementById('m3u-cancel');
            const m3uConfirmBtn = document.getElementById('m3u-confirm');
            const defaultLoadCheckbox = document.getElementById('default-load-checkbox');
			const urlCancelBtn = document.getElementById("url-cancel");
			const urlConfirmBtn = document.getElementById("url-confirm");
			const m3uNameInput = document.getElementById("m3u-name-input");
			const m3uUrlInput = document.getElementById("m3u-url-input");

            // 初始音量
            audioPlayer.volume = 0.8;

            // 电台数据
            let stations = [];
            let currentStationIndex = -1;
            let isPlaying = false;
            let timer = null;
            let hls;
			let showurl = false;

            // 从本地存储获取收藏和播放次数数据
            let favorites = JSON.parse(localStorage.getItem('radioFavorites')) || [];
            let defaultM3uFile = JSON.parse(localStorage.getItem('defaultM3uFile'));

            // 当前显示模式: all, favorites
            let displayMode = 'all';

            // 解析电台数据
            function parseStations(data) {
                return data.split('\\').filter(line => line.trim() !== '').map(line => {
                    const parts = line.split(',');
                    if (parts.length >= 2) {
                        return {
                            name: parts[0].trim(),
                            url: parts[1].trim(),
                            id: parts[0].trim().toLowerCase().replace(/\s+/g, '-')
                        };
                    }
                    return null;
                }).filter(station => station !== null);
            }

            // 渲染电台列表
            function renderStationList(filter = '') {
                stationList.innerHTML = '';
                let filteredStations = stations;

                // 根据显示模式过滤
                if (displayMode === 'favorites') {
                    filteredStations = [...favorites];
                }

                // 应用搜索过滤
                if (filter) {
                    const lowerFilter = filter.toLowerCase();
                    filteredStations = filteredStations.filter(station =>
                        station.name.toLowerCase().includes(lowerFilter));
						// station.name.toLowerCase().includes(lowerFilter) || station.url.toLowerCase().includes(lowerFilter));
                }

                filteredStations.forEach((station, index) => {
                    if (!station) return;
                    // 检查是否在主列表中
                    const isInMainList = stations.some(s => s.id === station.id);
                    // 获取在主列表中的索引（如果存在）
                    const originalIndex = isInMainList ? stations.findIndex(s => s.id === station.id) : -1;
                    // 检查是否为当前播放的电台
                    const isActive = isInMainList ? (originalIndex === currentStationIndex) : 
                                   (currentStationIndex !== -1 && stations[currentStationIndex].id === station.id);
                    // 检查是否为收藏电台
                    const isFavorite = favorites.some(fav => fav.id === station.id);

                    const stationItem = document.createElement('div');
                    stationItem.className = 'station-item';
                    if (isActive) {
                        stationItem.classList.add('active');
                    }
					
					if(showurl){
						stationItem.innerHTML = `<div class="station-item-name">${station.name}<div style="font-size:9pt;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">${station.url}</div></div>
                        <button class="favorite-btn ${isFavorite ? 'favorited' : ''}" 
                                data-id="${station.id}">${isFavorite ? '★' : '☆'}</button>
                        ${isActive && isPlaying ? '<div class="station-item-playing"></div>' : ''}`;
					}
					else{
						stationItem.innerHTML = `<div class="station-item-name">${station.name}</div>
                        <button class="favorite-btn ${isFavorite ? 'favorited' : ''}" 
                                data-id="${station.id}">${isFavorite ? '★' : '☆'}</button>
                        ${isActive && isPlaying ? '<div class="station-item-playing"></div>' : ''}`;
					}
                    

                    stationItem.addEventListener('click', () => {
                        // 如果在主列表中，使用主列表索引
                        if (isInMainList) {
                            selectStation(originalIndex);
                        } else {
                            // 否则从收藏列表添加到主列表并播放
                            const newIndex = stations.push(station) - 1;
                            selectStation(newIndex);
                        }
                    });

                    stationList.appendChild(stationItem);
                });

                // 添加收藏按钮事件
                document.querySelectorAll('.favorite-btn').forEach(btn => {
                    btn.addEventListener('click', function (e) {
                        e.stopPropagation();
                        const stationId = this.getAttribute('data-id');
						// 找到对应的电台
                        const station = filteredStations.find(s => s.id === stationId);
                        if (station) {
                            toggleFavorite(station);
                        }
                    });
                });
            }

            // 切换收藏状态
            function toggleFavorite(station) {
				// 查找收藏列表中是否存在该电台
                const index = favorites.findIndex(fav => fav.id === station.id);
				
                if (index === -1) {
					// 添加收藏
                    favorites.push({...station}); // 存储完整对象
                } else {
					// 从收藏中移除
                    favorites.splice(index, 1);
                }
				
				//保存到本地存储
                localStorage.setItem('radioFavorites', JSON.stringify(favorites));
				//重新渲染列表
                renderStationList(searchBox.value);
            }

            // 选择电台
            function selectStation(index) {
                if (index < 0 || index >= stations.length) return;
				const display = document.getElementsByClassName("display");
				if(display.length > 0){
					display[0].style.background = "#95ff62";
				}
                currentStationIndex = index;
                const station = stations[index];

                // 更新显示
                currentStationDisplay.textContent = station.name;
                statusDisplay.textContent = '正在加载...';

                // 停止当前播放
                audioPlayer.pause();
                isPlaying = false;
                playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';

                // 停止 hls.js 实例
                if (hls) {
                    hls.destroy();
                }

                // 设置新的音频源
                const regex = /\.m3u8(\?|$)/i;
                if (regex.test(station.url)) {
                    if (Hls.isSupported()) {
                        hls = new Hls();
                        hls.loadSource(station.url);
                        hls.attachMedia(audioPlayer);
                        hls.on(Hls.Events.MEDIA_ATTACHED, function () {
                            const playPromise = audioPlayer.play();
                            if (playPromise !== undefined) {
                                playPromise.then(_ => {
                                    // 播放成功
                                    isPlaying = true;
                                    playIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
                                    statusDisplay.textContent = '正在播放';
                                }).catch(error => {
                                    // 播放失败
                                    console.error('播放失败:', error);
                                    statusDisplay.textContent = '播放失败: ' + (error.message || '未知错误');
                                });
                            }
                        });
                        hls.on(Hls.Events.ERROR, function (event, data) {
                            console.error('HLS 错误:', data);
                            statusDisplay.textContent = '播放失败: ' + (data.details || '未知错误');
                        });
                    } else if (audioPlayer.canPlayType('application/vnd.apple.mpegurl')) {
                        audioPlayer.src = station.url;
                        const playPromise = audioPlayer.play();
                        if (playPromise !== undefined) {
                            playPromise.then(_ => {
                                // 播放成功
                                isPlaying = true;
                                playIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
                                statusDisplay.textContent = '正在播放';
                            }).catch(error => {
                                // 播放失败
                                console.error('播放失败:', error);
                                statusDisplay.textContent = '播放失败: ' + (error.message || '未知错误');
                            });
                        }
                    }
                } else {
                    audioPlayer.src = station.url;
                    const playPromise = audioPlayer.play();
                    if (playPromise !== undefined) {
                        playPromise.then(_ => {
                            // 播放成功
                            isPlaying = true;
                            playIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
                            statusDisplay.textContent = '正在播放';
                        }).catch(error => {
                            // 播放失败
                            console.error('播放失败:', error);
                            statusDisplay.textContent = '播放失败: ' + (error.message || '未知错误');
                        });
                    }
                }

                // 重新渲染列表以更新活动状态
                renderStationList(searchBox.value);
            }

            // 播放/暂停
            btnPlay.addEventListener('click', function () {
                if (currentStationIndex === -1 && stations.length > 0) {
                    selectStation(0);
                    return;
                }

                if (isPlaying) {
                    audioPlayer.pause();
                    isPlaying = false;
                    playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
                    statusDisplay.textContent = '已暂停';
                } else {
                    const playPromise = audioPlayer.play();
                    if (playPromise !== undefined) {
                        playPromise.then(_ => {
                            isPlaying = true;
                            playIcon.innerHTML = '<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>';
                            statusDisplay.textContent = '正在播放';
                        }).catch(error => {
                            console.error('播放失败: ', error);
                            statusDisplay.textContent = '播放失败: ' + (error.message || '未知错误');
                        });
                    }
                }
                renderStationList(searchBox.value);
            });

            // 上一首
            btnPrev.addEventListener('click', function () {
                if (stations.length === 0) return;
                let newIndex = currentStationIndex - 1;
                if (newIndex < 0) {
                    newIndex = stations.length - 1;
                }
                selectStation(newIndex);
            });
			
            // 下一首
            btnNext.addEventListener('click', function () {
                if (stations.length === 0) return;
                let newIndex = currentStationIndex + 1;
                if (newIndex >= stations.length) {
                    newIndex = 0;
                }
                selectStation(newIndex);
            });
			
            // 随机下一首
            btnNext.addEventListener('dblclick', function () {
                if (stations.length === 0) return;
                let newIndex = Math.floor(Math.random() * (stations.length));
                if (newIndex >= stations.length) {
                    newIndex = 0;
                }
                selectStation(newIndex);
            });

            // 搜索框事件
            searchBox.addEventListener('input', function () {
                const value = this.value;
                if (value) {
                    clearSearch.style.display = 'block';
                } else {
                    clearSearch.style.display = 'none';
                }
                renderStationList(value);
            });

            // 清除搜索框内容
            clearSearch.addEventListener('click', function () {
                searchBox.value = '';
                this.style.display = 'none';
                renderStationList();
            });

            // 显示收藏
            btnShowFavorites.addEventListener('click', function () {
                displayMode = 'favorites';
                btnShowFavorites.classList.add('active');
                btnShowAll.classList.remove('active');
                renderStationList(searchBox.value);
            });

            // 显示全部
            btnShowAll.addEventListener('click', function () {
                displayMode = 'all';
                btnShowFavorites.classList.remove('active');
                btnShowAll.classList.add('active');
                renderStationList(searchBox.value);
            });

            // 定时器按钮
            btnTimer.addEventListener('click', function () {
                timerContainer.style.display = 'flex';
            });

            // 定时选项按钮
            timerOptionBtns.forEach(btn => {
                btn.addEventListener('click', function () {
                    customTimeInput.value = this.getAttribute('data-minutes');
                });
            });

            // 设置定时器
            timerSetBtn.addEventListener('click', function () {
                const minutes = parseInt(customTimeInput.value);
                if (isNaN(minutes)) {
                    alert('请输入有效的分钟数');
                    return;
                }

                // 清除现有定时器
                if (timer) {
                    clearTimeout(timer);
                }

                // 设置新定时器
                timer = setTimeout(() => {
                    audioPlayer.pause();
                    isPlaying = false;
                    playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
                    statusDisplay.textContent = '定时关闭';
                    timer = null;
                }, minutes * 60 * 1000);

                statusDisplay.textContent = `已设置${minutes}分钟后关闭`;
                timerContainer.style.display = 'none';
            });

            // 取消定时器
            timerCancelBtn.addEventListener('click', function () {
                if (timer) {
                    clearTimeout(timer);
                }
                statusDisplay.textContent = '已取消定时关闭';
                timerContainer.style.display = 'none';
            });

            // 打开M3u文件按钮
            btnOpenM3u.addEventListener('click', function () {
                m3uSelectContainer.style.display = 'flex';
            });

            // 取消选择M3u文件
            m3uCancelBtn.addEventListener('click', function () {
                m3uSelectContainer.style.display = 'none';
            });
            // 取消添加URL
			urlCancelBtn.addEventListener('click', function () {
                m3uSelectContainer.style.display = 'none';
				m3uNameInput.value='';
				m3uUrlInput.value='';
            });
			// 添加URL
			urlConfirmBtn.addEventListener('click', function () {
                rname = m3uNameInput.value;
				rurl = m3uUrlInput.value;
				if(rurl == ""){
					alert("电台链接不能为空");
				}
				else{
					if(rname == ""){
						rname = rurl;
					}
					const rstation={
                            name: rname.trim(),
                            url: rurl.trim(),
                            id: rname.trim().toLowerCase().replace(/\s+/g, '-')
					}
					stations.push(rstation);
					
                    const originalIndex = stations.findIndex(s => s.id === rstation.id);
                    const isActive = originalIndex === currentStationIndex;

                    const stationItem = document.createElement('div');
                    stationItem.className = 'station-item';
                    stationItem.classList.add('active');
					
					if(showurl){
						stationItem.innerHTML = `<div class="station-item-name">${rname}<div style="font-size:9pt;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;">${rurl}</div></div>
                        <button class="favorite-btn" data-id="${rstation.id}">☆</button>`;
					}
					else{
						stationItem.innerHTML = `<div class="station-item-name">${rname}</div>
                        <button class="favorite-btn" data-id="${rstation.id}">☆</button>`;
					}
                    

                    stationItem.addEventListener('click', () => {
                        selectStation(originalIndex);
                    });

                    stationList.appendChild(stationItem);
					selectStation(originalIndex);
					currentStationDisplay.click();
				}
				m3uSelectContainer.style.display = 'none';
				m3uNameInput.value='';
				m3uUrlInput.value='';
            });

            // 确认选择M3u文件
            m3uConfirmBtn.addEventListener('click', function () {
                const file = m3uFileInput.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        const content = e.target.result;
                        const lines = content.split('\n');
                        let newRadioData = [];
                        if (file.type == 'text/csv') {
                            for (let i = 0; i < lines.length; i++) {
                                const name = lines[i].split(',')[0];
                                const url = lines[i].split(',')[1];
                                try {
                                    new URL(url);
                                    if (name && url) {
                                        newRadioData.push(`${name},${url}`);
                                    }
                                }
                                catch (e) {
                                    continue;
                                }
                            }
                        } else {
                            for (let i = 0; i < lines.length; i++) {
                                if (lines[i].startsWith('#EXTINF:')) {
                                    const name = lines[i].split(',')[1].trim();
                                    const url = lines[i + 1].trim();
                                    if (name && url) {
                                        newRadioData.push(`${name},${url}`);
                                    }
                                }
                            }
                        }

                        radioData = newRadioData.join('\\');
                        stations = parseStations(radioData);
                        currentStationIndex = -1;
                        isPlaying = false;
                        playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
                        audioPlayer.pause();
                        statusDisplay.textContent = '';
                        renderStationList();

                        // 保存默认加载文件信息
                        if (defaultLoadCheckbox.checked) {
                            localStorage.setItem('defaultM3uFile', JSON.stringify({
                                name: file.name,
                                content: content
                            }));
                        } else {
                            localStorage.removeItem('defaultM3uFile');
                        }
                    };
                    reader.readAsText(file);
                }
                m3uSelectContainer.style.display = 'none';
            });

            // 初始化电台数据
            stations = parseStations(radioData);

            // 如果有默认加载的m3u文件，加载它
            if (defaultM3uFile) {
                defaultLoadCheckbox.checked = true;
                const lines = defaultM3uFile.content.split('\n');
				const fname=defaultM3uFile.name;
                let newRadioData = [];
				if (fname.slice(-3) == 'm3u' ) {
	                for (let i = 0; i < lines.length; i++) {
	                    if (lines[i].startsWith('#EXTINF:')) {
	                        const name = lines[i].split(',')[1].trim();
	                        const url = lines[i + 1].trim();
	                        if (name && url) {
	                            newRadioData.push(`${name},${url}`);
	                        }
	                    }
	                }
				}			
				else{
                    for (let i = 0; i < lines.length; i++) {
                        const name = lines[i].split(',')[0];
                        const url = lines[i].split(',')[1];
                        try {
                            new URL(url);
                            if (name && url) {
                                newRadioData.push(`${name},${url}`);
                            }
                        }
                        catch (e) {
                            continue;
                        }
                    }
				}

                radioData = newRadioData.join('\\');
                stations = parseStations(radioData);
                currentStationIndex = -1;
                isPlaying = false;
                playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
                audioPlayer.pause();
                statusDisplay.textContent = '';
                renderStationList();
            }

            // 初始渲染
            renderStationList();

            // 键盘快捷键
            document.addEventListener('keydown', function (e) {
			    // 检查当前焦点是否在输入框中
			    const activeElement = document.activeElement;
			    const isInputFocused = activeElement.tagName === 'INPUT' && 
			                          activeElement.type !== 'checkbox' && 
			                          activeElement.type !== 'radio';
    
			    // 如果焦点在输入框中，不执行快捷键
			    if (isInputFocused) return;
				
                if (e.code === 'Space') {
                    e.preventDefault();
                    btnPlay.click();
                } else if (e.code === 'ArrowLeft') {
                    btnPrev.click();
                } else if (e.code === 'ArrowRight') {
                    btnNext.click();
                }
            });

            // 音频错误处理
            audioPlayer.addEventListener('error', function () {
                statusDisplay.textContent = '播放错误: 无法加载音频';
                isPlaying = false;
                playIcon.innerHTML = '<path d="M8 5v14l11-7z"/>';
                renderStationList(searchBox.value);
            });

            // 滚动到当前播放电台
            currentStationDisplay.addEventListener('click', function () {
                if (currentStationIndex !== -1) {
                    const activeStation = stationList.querySelector('.station-item.active');
                    if (activeStation) {
                        activeStation.scrollIntoView({
                            behavior: 'smooth',
                            block: 'center'
                        });
                    }
                }
            });
			
            // 显示/隐藏电台URL
            currentStationDisplay.addEventListener('dblclick', function () {
				if(showurl){
					showurl = false;
					renderStationList(searchBox.value);
				}
				else{
					showurl = true;
					renderStationList(searchBox.value);
				}
            });
        });
    </script>
</body>

</html>